# itinerary_forecast
–ó–∞–¥–∞—á–∞ ¬´–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è
–ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö –∫–∞—Ä—Ç¬ª

–í–≤–µ–¥–µ–Ω–∏–µ

–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ –†–æ—Å—Å–∏–∏ –º–∏–ª–ª–∏–æ–Ω—ã –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ —Å–æ–≤–µ—Ä—à–∞—é—Ç –ø–æ–µ–∑–¥–∫–∏ –Ω–∞
—Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∏–¥–∞—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞, —Ñ–æ—Ä–º–∏—Ä—É—è –±–æ–ª—å—à–æ–π –ø—É–ª –¥–∞–Ω–Ω—ã—Ö –æ —Å–≤–æ–∏—Ö
–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –ú–æ—Å–∫–æ–≤—Å–∫–∏–π –º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω –≤ —Å—É—Ç–∫–∏ –ø–µ—Ä–µ–≤–æ–∑–∏—Ç –¥–æ
7 –º–ª–Ω —á–µ–ª–æ–≤–µ–∫. –ê –∫ 2030 –≥–æ–¥—É –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–æ 200
–Ω–æ–≤—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π. –û–∫–æ–ª–æ 60% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ¬´–ú–æ—Å–∫–æ–≤—Å–∫–∏–π
—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç¬ª –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ç—Ä–æ
–ú–æ—Å–∫–≤—ã.
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ ‚Äì —Å–ª–æ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π
—Ç—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–≥–æ—Å—è –æ–±—ä–µ–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≤ —Ç–æ–º
—á–∏—Å–ª–µ –æ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤. –ü—Ä–∏ —Ä–µ—à–µ–Ω–∏–∏ –ø–æ–¥–æ–±–Ω—ã—Ö
–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥—è—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑—É—á–∏—Ç—å
—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≤–µ—Ç–∫–∏
–º–µ—Ç—Ä–æ–ø–æ–ª–∏—Ç–µ–Ω–∞, —Å–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö.

–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏

–ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ –ø–∞—Å—Å–∞–∂–∏—Ä–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –º–µ—Ç—Ä–æ
–¥–≤–∞–∂–¥—ã –∑–∞ —Å—É—Ç–∫–∏, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ –≤ –º–µ—Ç—Ä–æ,
–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å, –Ω–∞ –∫–∞–∫–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ –∏ —á–µ—Ä–µ–∑ –∫–∞–∫–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫
–≤—Ä–µ–º–µ–Ω–∏, —ç—Ç–æ—Ç –ø–∞—Å—Å–∞–∂–∏—Ä –≤–æ—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç—Ä–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ.

–û–ø–∏—Å–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

–í –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –ª—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–≤–µ—Ä—à–∏–ª–∏ —Ä–æ–≤–Ω–æ –¥–≤–µ
–ø–æ–µ–∑–¥–∫–∏ –≤ –¥–µ–Ω—å, –ø—Ä–∏ —ç—Ç–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–π –≤–∑—è—Ç–∞ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π.
‚óè train.csv ‚Äî —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–∞–Ω–Ω—ã–µ –æ –≤–∞–ª–∏–¥–∞—Ü–∏—è—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è;
‚óè test.csv ‚Äî —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è;
‚óè sample_solution.csv ‚Äî –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏;‚óè subway. csv ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Å–µ—Ö
–≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞—Ö –ø–æ–ø–∞—Å—Ç—å —Å–æ —Å—Ç–∞–Ω—Ü–∏–∏ ¬´–ê¬ª –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—é ¬´–ë¬ª;
–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è train –∏ test:
‚óè id - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—Ç–æ–ª–±—Ü–∞;
‚óè ticket_id - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –±–∏–ª–µ—Ç–∞, —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ —É –æ–¥–Ω–æ–≥–æ
–±–∏–ª–µ—Ç–∞ –æ–¥–∏–Ω –≤–ª–∞–¥–µ–ª–µ—Ü
‚óè ticket_type_nm - —Ç–∏–ø –±–∏–ª–µ—Ç–∞
‚óè entrance_id - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π id –≤—Ö–æ–¥–∞ –≤ —Å—Ç–∞–Ω—Ü–∏—é
‚óè entrance_nm - –Ω–∞–∑–≤–∞–Ω–∏–µ
‚óè station_id - —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ id —Å—Ç–∞–Ω—Ü–∏–∏ –∑–∞—Ö–æ–¥–∞
‚óè station_nm - –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ –∑–∞—Ö–æ–¥–∞
‚óè line_id - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π id –≤–µ—Ç–∫–∏ –Ω–∞, –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—Ç–∞–Ω—Ü–∏—è
‚óè line_nm - –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤–µ—Ç–∫–∏, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—Ç–∞–Ω—Ü–∏—è
‚óè pass_dttm - –¥–∞—Ç–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚óè time_to_under (—Å—Ç–æ–ª–±–µ—Ü –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è) - —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—à–ª–æ
–º–µ–∂–¥—É –ø–µ—Ä–≤–æ–π –∏ –≤—Ç–æ—Ä–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚óè label (—Å—Ç–æ–ª–±–µ—Ü –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è) - id –≤—Ç–æ—Ä–æ–π —Å—Ç–∞–Ω—Ü–∏–∏, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π
–ø—Ä–æ–∏–∑–æ—à–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è

–ù–∞ —á—Ç–æ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ

–ß—Ç–æ–±—ã –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ –ø–æ–Ω–∏–º–∞—Ç—å –∑–∞–¥–∞—á—É, —Å—Ç–æ–∏—Ç —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å
–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç –º–æ—Å–∫–≤–∏—á–∞. –û–±—ã—á–Ω–æ —ç—Ç–æ —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –±—É–¥–Ω—è–º
–µ–∑–¥–∏—Ç –∏–∑ –∫–æ–Ω–µ—á–Ω—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π –≤ —Ü–µ–Ω—Ç—Ä –Ω–∞ —Ä–∞–±–æ—Ç—É/—É—á–µ–±—É, –∞ –ø–æ—Å–ª–µ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è
–¥–æ–º–æ–π. –í —Å—Ä–µ–¥–Ω–µ–º —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –∑–∞–Ω–∏–º–∞–µ—Ç 8 —á–∞—Å–æ–≤, –∞ —É—á–µ–±–Ω—ã–π 5-7.

–ú–µ—Ç—Ä–∏–∫–∞

–í –∫–∞—á–µ—Å—Ç–≤–µ –º–µ—Ç—Ä–∏–∫–∏ —Å—É–º–º–∞ Recall –ø–æ —Å—Ç–æ–ª–±—Ü—É label –∏ R2 –ø–æ
time_to_under.
result = 0.5 * Recall + 0.5 * R2
R^2 —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫:
R2 = 1- SSres / SStot
SS res - —Å—É–º–º–∞ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –æ—Å—Ç–∞—Ç–æ—á–Ω—ã—Ö –æ—à–∏–±–æ–∫.
SS tot - –æ–±—â–∞—è —Å—É–º–º–∞ –æ—à–∏–±–æ–∫.


1Ô∏è‚É£ –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è

üëâ Feature Engineering:

üìå –ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —Ñ–∏—á–∏: min, max, median, std time_to_under
üìå –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–æ–Ω—ã –¥–ª—è —Å—Ç–∞–Ω—Ü–∏–π: –¥–æ –ú–¶–ö, –æ—Ç –ú–¶–ö –¥–æ –∫–æ–ª—å—Ü–∞  –∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª—å—Ü–∞
üìå –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—Ç–∞–Ω—Ü–∏–π –º–µ—Ç—Ä–æ –∏ –ª—ç–π–±–ª–æ–≤ –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã —Ñ–∏—á–∏: —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å—Ç–∞–Ω—Ü–∏—è–º–∏, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –æ—Ç —Å—Ç–∞–Ω—Ü–∏–π –¥–æ –ö—Ä–µ–º–ª—è

üëâ –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –º–Ω–æ–≥–æ–∫–ª–∞—Å—Å–æ–≤–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω CatBoost
üëâ –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ —Ä–µ–≥—Ä–µ—Å—Å–∏ –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Stacking –º–æ–¥–µ–ª–µ–π CatBoost, LightGBM, Random Forest. –í –∫–∞—á–µ—Å—Ç–≤–µ –º–µ—Ç–∞-–º–æ–¥–µ–ª–∏ –±—ã–ª –≤—ã–±—Ä–∞–Ω –õ–∞—Å—Å–æ:

2Ô∏è‚É£ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
üëâ Python, sciikit learn, geopy, geopandas, Catboost, LightGBM, Optuna
